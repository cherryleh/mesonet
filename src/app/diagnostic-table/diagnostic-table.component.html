<!-- Login box -->
<div *ngIf="!authorized" class="login-box">
  <h2>Password Required</h2>
  <input [(ngModel)]="passwordInput" type="password" placeholder="Enter password" />
  <button (click)="checkPassword()">Login</button>
  <p *ngIf="error" style="color:red;">Invalid password</p>
</div>

<!-- Reload button -->
<div *ngIf="authorized && !loading" class="table-header">
  <button (click)="reload()">ðŸ”„ Reload Data</button>
</div>

<!-- Loading indicator -->
<div *ngIf="authorized && loading" class="loading-box">
  <p>Loading station data...</p>
</div>

<!-- Data table -->
<div *ngIf="authorized && !loading">
  <table>
    <thead>
      <tr>
        <th (click)="sortBy('stationId')">Station</th>
        <th *ngFor="let col of columns" (click)="sortBy(col)">
          {{ col }}
        </th>
        <th (click)="sortBy('Status')">Status</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let row of stationData">
        <td>{{ row.stationId }}</td>
        <td *ngFor="let col of columns"
            [ngClass]="{
              'critical': evaluateCell(col, row[col]) === 'Critical',
              'warning': evaluateCell(col, row[col]) === 'Warning',
              'caution': evaluateCell(col, row[col]) === 'Caution'
            }">
          {{ row[col] }}
        </td>
        <td [ngClass]="{'critical': row['Status'] === 'Critical'}">
          {{ row['Status'] }}
        </td>
      </tr>
    </tbody>
  </table>
</div>
