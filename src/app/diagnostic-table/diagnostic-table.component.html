<!-- Login box -->
<div *ngIf="!authorized" class="login-box">
  <h2>Password Required</h2>
  <input [(ngModel)]="passwordInput" type="password" placeholder="Enter password" />
  <button (click)="checkPassword()">Login</button>
  <p *ngIf="error" style="color:red;">Invalid password</p>
</div>

<!-- Reload button -->
<div *ngIf="authorized && !loading" class="table-header">
  <button (click)="reload()">üîÑ Reload Data</button>
</div>

<div *ngIf="authorized && !loading" class="criteria-toggle">
  <label>
    <input type="checkbox" [(ngModel)]="showCriteria" />
    Show Criteria
  </label>
</div>

<!-- Criteria list -->
<div *ngIf="showCriteria" class="criteria-details">
  <table>
    <thead>
      <tr>
        <th>Variable</th>
        <th>‚ö†Ô∏è Warning</th>
        <th>‚ùå Critical</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let c of criteriaReference">
        <td><b>{{ c.variable }}</b></td>
        <td>{{ c.warning }}</td>
        <td>{{ c.critical }}</td>
      </tr>
    </tbody>
  </table>
</div>

<!-- Loading indicator -->
<div *ngIf="authorized && loading" class="loading-box">
  <p>Loading station data...</p>
</div>

<!-- Data table -->
<div *ngIf="authorized && !loading">
  <table>
    <thead>
      <tr>
        <th (click)="sortBy('stationId')">Station</th>
        <th *ngFor="let col of columns" (click)="sortBy(col)">
          {{ col }}
        </th>
        <th (click)="sortBy('Status')">Status</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let row of stationData">
        <td>{{ row.stationId }}</td>
        <td *ngFor="let col of columns"
            [ngClass]="{
              'critical': evaluateCell(col, row[col]) === 'Critical',
              'warning': evaluateCell(col, row[col]) === 'Warning',
              'caution': evaluateCell(col, row[col]) === 'Caution'
            }">
          {{ row[col] }}
        </td>
        <td [ngClass]="{
              'critical': row['Status'] === 'Critical',
              'warning': row['Status'] === 'Warning'
        }">
          {{ row['Status'] }}
        </td>

      </tr>
    </tbody>
  </table>
</div>
