plotOptions: {
  series: {
    showCheckbox: true,
    events: {
      checkboxClick: function () {
        this.setVisible(!this.visible);
      },
      legendItemClick: function () {
        // Query the DOM for the checkbox
        const legendItem = this.legendItem.element;
        const checkbox = legendItem?.parentNode?.querySelector('input[type="checkbox"]') as HTMLInputElement;

        if (checkbox) {
          checkbox.checked = !this.visible; // Sync checkbox state
        }

        return true; // Allow default legend behavior
      }
    }
  }
}
